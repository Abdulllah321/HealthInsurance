@model HealthInsurance.Entities.HospitalIndexViewModel

@{
    ViewData["Title"] = "Hospital Index";
}

<h1 class="text-3xl font-bold mb-6">Hospital Index</h1>

<div class="flex items-center justify-between">

<p class="mb-4">
    <a href="@Url.Action("Create")" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md">Create New</a>
</p>

<div class="mb-6 flex justify-between items-center">
    <div class="flex space-x-2">
        <input type="text" placeholder="Search..." value="@Model.SearchString" id="searchString" class="border border-gray-300 rounded-lg bg-transparent px-3 py-2" />
        <button id="searchBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md">Search</button>
    </div>
</div>
</div>

<div class="relative overflow-x-auto">

<table class="max-w-full divide-y divide-gray-200 bg-white dark:bg-gray-800 shadow-md rounded-lg">
    <thead class="bg-gray-100 dark:bg-gray-700">
        <tr>
            <th style="width: 30%;" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                <a href="?searchString=@Model.SearchString&sortOrder=@(Model.SortOrder == "name" ? "name_desc" : "name")" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
                    Hospital Name
                    @if (Model.SortOrder == "name_desc")
                    {
                        <i class="fas fa-sort-down"></i>
                    }
                    else
                    {
                        <i class="fas fa-sort-up"></i>
                    }
                </a>
            </th>
            <th style="width: 20% !important;" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                <a href="?searchString=@Model.SearchString&sortOrder=@(Model.SortOrder == "phone" ? "phone_desc" : "phone")" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
                    Phone Number
                    @if (Model.SortOrder == "phone_desc")
                    {
                        <i class="fas fa-sort-down"></i>
                    }
                    else
                    {
                        <i class="fas fa-sort-up"></i>
                    }
                </a>
            </th>
            <th style="width: 25% !important;" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                <a href="?searchString=@Model.SearchString&sortOrder=@(Model.SortOrder == "location" ? "location_desc" : "location")" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
                    Location
                    @if (Model.SortOrder == "location_desc")
                    {
                        <i class="fas fa-sort-down"></i>
                    }
                    else
                    {
                        <i class="fas fa-sort-up"></i>
                    }
                </a>
            </th>
            <th style="width: 25%;" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                <a href="?searchString=@Model.SearchString&sortOrder=@(Model.SortOrder == "url" ? "url_desc" : "url")" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
                    URL
                    @if (Model.SortOrder == "url_desc")
                    {
                        <i class="fas fa-sort-down"></i>
                    }
                    else
                    {
                        <i class="fas fa-sort-up"></i>
                    }
                </a>
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"></th>
        </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700">
        @foreach (var item in Model.Hospitals)
        {
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 truncate" style="max-width: 30%;">@Html.DisplayFor(modelItem => item.HospitalName)</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 truncate" style="max-width: 20%;">@Html.DisplayFor(modelItem => item.PhoneNo)</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 truncate" style="max-width: 25% !important;">@Html.DisplayFor(modelItem => item.Location)</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 truncate" style="max-width: 25%;">@Html.DisplayFor(modelItem => item.Url)</td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <a href="@Url.Action("Edit", new { id = item.HospitalId })" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">Edit</a> |
                        <a href="@Url.Action("Details", new { id = item.HospitalId })" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">Details</a> |
                        <a href="@Url.Action("Delete", new { id = item.HospitalId })" class="text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300">Delete</a>
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="flex justify-between items-center mt-6">
    <div>
        <span class="text-sm text-gray-700 dark:text-gray-400">Page @Model.CurrentPage of @Model.TotalPages</span>
    </div>
    <div class="flex space-x-2">
        @if (Model.CurrentPage > 1)
        {
            <a href="?page=@(Model.CurrentPage - 1)&searchString=@Model.SearchString&sortOrder=@Model.SortOrder" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md">Previous</a>
        }
        @if (Model.CurrentPage < Model.TotalPages)
        {
            <a href="?page=@(Model.CurrentPage + 1)&searchString=@Model.SearchString&sortOrder=@Model.SortOrder" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md">Next</a>
        }
    </div>
</div>
</div>
@section Scripts {
    <script>
        document.getElementById('searchBtn').addEventListener('click', function () {
            var searchString = document.getElementById('searchString').value;
            var sortOrder = '@Model.SortOrder';
            window.location.href = `?searchString=${searchString}&sortOrder=${sortOrder}`;
                });
    </script>
}
